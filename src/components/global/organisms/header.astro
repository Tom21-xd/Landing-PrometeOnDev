---
import LogoButton from "../atoms/logoButton.astro";
import NavMenu from "../molecules/navMenu.astro";
import MobileMenu from "../molecules/mobileMenu.astro";
import ContactBurgerButton from "../molecules/contactBurgerButton.astro";
---

<header class="w-full bg-transparent z-50">
  <div
    class="max-w-screen-xl mx-auto px-4 pt-6 flex justify-between items-center"
  >
    <LogoButton />
    <NavMenu />

    <div class="flex md:hidden">
      <ContactBurgerButton id="burger-button" />
    </div>
  </div>

  <div
    id="mobile-menu"
    class="inset-0 z-50 bg-white bg-opacity-95 backdrop-blur-lg transform translate-x-full transition-transform duration-300"
  >
    <MobileMenu />
  </div>

  <script>
    function setupToggleMenu(
      buttonId: string,
      menuId: string,
      closeButtonId: string
    ): void {
      const burgerButton = document.getElementById(
        buttonId
      ) as HTMLButtonElement | null;
      const mobileMenu = document.getElementById(menuId) as HTMLElement | null;
      const closeButton = document.getElementById(
        closeButtonId
      ) as HTMLButtonElement | null;

      if (!burgerButton || !mobileMenu || !closeButton) {
        return;
      }

      burgerButton.addEventListener("click", () => {
        mobileMenu.classList.toggle("translate-x-full");
        mobileMenu.classList.toggle("translate-x-0");
      });

      closeButton.addEventListener("click", () => {
        mobileMenu.classList.add("translate-x-full");
        mobileMenu.classList.remove("translate-x-0");
      });
    }

    if (typeof window !== "undefined") {
      document.addEventListener("DOMContentLoaded", () => {
        setupToggleMenu("burger-button", "mobile-menu", "close-menu-button");
      });
    }
  </script>
</header>
