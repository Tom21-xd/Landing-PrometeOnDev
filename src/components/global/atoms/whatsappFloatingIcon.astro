---
import { getWhatsAppLink } from "@/lib/whatsapp";

const whatsappLink = getWhatsAppLink();
---

<a
  id="whatsapp-icon"
  href={whatsappLink}
  target="_blank"
  rel="noopener noreferrer"
  class="group fixed bottom-6 right-6 z-50 flex items-center justify-center w-14 h-14 rounded-full bg-green-500 text-white hover:bg-green-500/90 transition-all duration-300 shadow-lg"
  aria-label="WhatsApp"
>
  <i
    class="fa-brands fa-whatsapp text-3xl group-hover:scale-95 group-hover:-rotate-3 duration-300 transition-transform"
  ></i>
</a>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const icon = document.getElementById("whatsapp-icon");

    if (!icon) return;

    const showAfter = 200; // pÃ­xeles de scroll

    const toggleIcon = () => {
      if (window.scrollY > showAfter) {
        icon.classList.remove("opacity-0", "pointer-events-none");
      } else {
        icon.classList.add("opacity-0", "pointer-events-none");
      }
    };

    window.addEventListener("scroll", toggleIcon);
    toggleIcon();
  });
</script>
